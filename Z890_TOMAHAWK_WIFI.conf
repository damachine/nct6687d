# Micro-Star International Co., Ltd.
# MSI MAG Z890 TOMAHAWK WIFI - Optimierte Sensor-Konfiguration
# Intel Z890 Chipset with NCT6687D/NCT6687 Super-I/O
# Erstellt für Arch Linux mit nct6687d Treiber
#
# Diese Konfigurationsdatei ist speziell für das MSI MAG Z890 TOMAHAWK WIFI optimiert.
# Basierend auf Hardware-Analyse und Z890-Spezifikationen.
#
# Installation:
# 1. sudo cp Z890_TOMAHAWK_WIFI.conf /etc/sensors.d/
# 2. echo "nct6687 manual=1" | sudo tee /etc/modules-load.d/nct6687.conf
# 3. sudo modprobe -r nct6687 && sudo modprobe nct6687 manual=1
# 4. sudo sensors -s && sensors
#
# Anpassung: Vergleichen Sie Werte mit BIOS und passen Sie Multiplier bei Bedarf an

chip "nct6687-*"
    # Voltage labels - Intel Z890 typical configuration
    label in0         "+12V"          # 12V main power
    label in1         "+5V"           # 5V standby power  
    label in2         "VCore"         # CPU core voltage
    label in3         "CPU SA"        # CPU System Agent voltage
    label in4         "DRAM"          # Memory voltage
    label in5         "CPU I/O"       # CPU I/O voltage
    label in6         "CPU AUX"       # CPU auxiliary voltage
    label in7         "PCH Core"      # Platform Controller Hub voltage
    label in8         "+3.3V"         # 3.3V power rail
    label in9         "VTT"           # Termination voltage
    label in10        "VCCIO"         # I/O voltage
    label in11        "VSB"           # Standby voltage
    label in12        "AVSB"          # Auxiliary standby voltage
    label in13        "VBat"          # CMOS battery voltage

    # Fan labels - typical Z890 motherboard configuration
    label fan1        "CPU Fan"       # CPU cooler fan
    label fan2        "System Fan 1"  # Case fan 1
    label fan3        "System Fan 2"  # Case fan 2  
    label fan4        "System Fan 3"  # Case fan 3
    label fan5        "System Fan 4"  # Case fan 4
    label fan6        "System Fan 5"  # Case fan 5
    label fan7        "Pump Fan"      # AIO pump or additional fan
    label fan8        "System Fan 6"  # Additional case fan

    # Temperature labels - Z890 typical sensors
    label temp1       "CPU"           # CPU temperature
    label temp2       "System"        # System/ambient temperature
    label temp3       "VRM"           # Voltage regulator module
    label temp4       "PCH"           # Platform Controller Hub
    label temp5       "CPU Socket"    # CPU socket temperature
    label temp6       "M.2_1"         # M.2 slot 1 temperature
    label temp7       "M.2_2"         # M.2 slot 2 temperature

    # Ignore unused or unreliable sensors
    # Uncomment these lines if certain sensors show invalid readings
    # ignore in9          # VTT if not used
    # ignore in10         # VCCIO if not reliable
    # ignore in11         # VSB if not needed
    # ignore in12         # AVSB if not needed
    # ignore in13         # VBat if not reliable
    # ignore temp6        # M.2_1 if no sensor
    # ignore temp7        # M.2_2 if no sensor

    # Voltage multipliers - adjust based on actual readings
    # These multipliers convert raw sensor values to actual voltages
    compute in0       (@ * 12), (@ / 12)    # +12V rail
    compute in1       (@ * 5), (@ / 5)      # +5V rail  
    compute in4       (@ * 2), (@ / 2)      # DRAM voltage (typically 1.2V-1.35V)
    # Note: VCore, CPU SA, CPU I/O typically don't need multipliers (1:1 ratio)
    # Uncomment and adjust if readings seem incorrect:
    # compute in2       (@ * 1), (@ / 1)    # VCore
    # compute in3       (@ * 1), (@ / 1)    # CPU SA
    # compute in5       (@ * 1), (@ / 1)    # CPU I/O
    # compute in6       (@ * 2), (@ / 2)    # CPU AUX if needed
    # compute in8       (@ * 1), (@ / 1)    # +3.3V typically 1:1

    # Temperature limits (optional)
    # Set reasonable limits for temperature monitoring
    set temp1_max     85              # CPU max temperature
    set temp1_crit    95              # CPU critical temperature
    set temp3_max     80              # VRM max temperature
    set temp4_max     70              # PCH max temperature

    # Fan speed limits (optional)
    # Set minimum fan speeds to ensure cooling
    set fan1_min      300             # CPU fan minimum RPM
    set fan2_min      200             # System fans minimum RPM
    set fan3_min      200
    set fan4_min      200
    set fan5_min      200
    set fan6_min      200
    set fan7_min      300             # Pump fan minimum RPM

# Notes for customization:
# 1. Monitor 'sensors' output after loading the driver
# 2. Compare voltage readings with BIOS/UEFI values
# 3. Adjust multipliers if voltages seem incorrect
# 4. Add 'ignore' statements for sensors showing invalid data
# 5. Modify labels to match your specific motherboard layout
#
# Common voltage ranges for reference:
# - VCore: 0.6V - 1.4V (depends on CPU)
# - DRAM: 1.2V - 1.35V (DDR4), 1.1V - 1.35V (DDR5)
# - CPU SA: 0.8V - 1.2V
# - +12V: 11.4V - 12.6V
# - +5V: 4.75V - 5.25V
# - +3.3V: 3.135V - 3.465V
